<svg xmlns="http://www.w3.org/2000/svg" width="1100" height="800" viewBox="0 0 1100 800">
  <style>
    .title { font: 700 20px / 1.2 sans-serif; }
    .label { font: 600 14px / 1.2 sans-serif; }
    .small { font: 12px / 1.2 sans-serif; }
    .box { fill: #f9fafb; stroke: #cbd5e1; stroke-width: 1.5; rx: 6; }
    .pub { fill: #e0f2fe; stroke: #38bdf8; }
    .priv { fill: #fee2e2; stroke: #ef4444; }
    .inl { fill: #ecfccb; stroke: #84cc16; }
    .agg { fill: #fef9c3; stroke: #f59e0b; }
    .folder { fill: #f3f4f6; stroke: #9ca3af; }
    .edge { stroke: #64748b; stroke-width: 1.5; marker-end: url(#arrow); }
    .legend { font: 12px sans-serif; }
  </style>

  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#64748b"/>
    </marker>
  </defs>

  <text x="20" y="30" class="title">Effect: Physical Code Layout</text>

  <!-- Top-level folders -->
  <rect x="20" y="50" width="320" height="720" class="folder"/>
  <text x="30" y="70" class="label">src/</text>

  <rect x="360" y="50" width="330" height="200" class="folder"/>
  <text x="370" y="70" class="label">examples/</text>

  <rect x="710" y="50" width="370" height="200" class="folder"/>
  <text x="720" y="70" class="label">doc/</text>

  <rect x="360" y="270" width="330" height="200" class="folder"/>
  <text x="370" y="290" class="label">build/</text>

  <rect x="710" y="270" width="370" height="200" class="folder"/>
  <text x="720" y="290" class="label">tests (src/test/)</text>

  <!-- src contents -->
  <rect x="40" y="90" width="280" height="60" class="agg"/>
  <text x="50" y="115" class="label">ak.hpp</text>
  <text x="50" y="135" class="small">Umbrella: includes public API + inline modules</text>

  <rect x="40" y="160" width="280" height="60" class="pub"/>
  <text x="50" y="185" class="label">ak/api.hpp</text>
  <text x="50" y="205" class="small">Public umbrella (types, kernel, IO, alloc, task)</text>

  <rect x="40" y="230" width="280" height="60" class="priv"/>
  <text x="50" y="255" class="label">ak/api_priv.hpp</text>
  <text x="50" y="275" class="small">Private umbrella (allocator, scheduler, debug)</text>

  <rect x="40" y="300" width="280" height="450" class="box"/>
  <text x="50" y="325" class="label">ak/ (modules)</text>

  <!-- ak subfolders -->
  <!-- alc -->
  <rect x="60" y="350" width="120" height="180" class="folder"/>
  <text x="70" y="370" class="label">alc/</text>
  <rect x="70" y="385" width="100" height="24" class="pub"/><text x="75" y="402" class="small">alc_api.hpp</text>
  <rect x="70" y="413" width="100" height="24" class="inl"/><text x="75" y="430" class="small">alc_api_inl.hpp</text>
  <rect x="70" y="441" width="100" height="24" class="priv"/><text x="75" y="458" class="small">alc_api_priv.hpp</text>
  <rect x="70" y="469" width="100" height="24" class="inl"/><text x="75" y="486" class="small">alc_api_priv_inl.hpp</text>
  <rect x="70" y="497" width="100" height="24" class="box"/><text x="75" y="514" class="small">.cpp (impl)</text>

  <!-- io -->
  <rect x="200" y="350" width="120" height="180" class="folder"/>
  <text x="210" y="370" class="label">io/</text>
  <rect x="210" y="385" width="100" height="24" class="pub"/><text x="215" y="402" class="small">io_api.hpp</text>
  <rect x="210" y="413" width="100" height="24" class="inl"/><text x="215" y="430" class="small">io_api_inl.hpp</text>
  <rect x="210" y="441" width="100" height="24" class="priv"/><text x="215" y="458" class="small">io_api_priv.hpp</text>
  <rect x="210" y="469" width="100" height="24" class="inl"/><text x="215" y="486" class="small">io_api_priv_inl.hpp</text>
  <rect x="210" y="497" width="100" height="24" class="box"/><text x="215" y="514" class="small">io_ops.cpp</text>

  <!-- tsk -->
  <rect x="60" y="540" width="120" height="180" class="folder"/>
  <text x="70" y="560" class="label">tsk/</text>
  <rect x="70" y="575" width="100" height="24" class="pub"/><text x="75" y="592" class="small">tsk_api.hpp</text>
  <rect x="70" y="603" width="100" height="24" class="inl"/><text x="75" y="620" class="small">tsk_api_inl.hpp</text>
  <rect x="70" y="631" width="100" height="24" class="priv"/><text x="75" y="648" class="small">tsk_api_priv.hpp</text>
  <rect x="70" y="659" width="100" height="24" class="inl"/><text x="75" y="676" class="small">tsk_api_priv_inl.hpp</text>
  <rect x="70" y="687" width="100" height="24" class="box"/><text x="75" y="704" class="small">.cpp (impl)</text>

  <!-- cctl -->
  <rect x="200" y="540" width="120" height="180" class="folder"/>
  <text x="210" y="560" class="label">cctl/</text>
  <rect x="210" y="575" width="100" height="24" class="pub"/><text x="215" y="592" class="small">cctl_api.hpp</text>
  <rect x="210" y="603" width="100" height="24" class="inl"/><text x="215" y="620" class="small">cctl_api_inl.hpp</text>
  <rect x="210" y="631" width="100" height="24" class="priv"/><text x="215" y="648" class="small">cctl_api_priv.hpp</text>
  <rect x="210" y="659" width="100" height="24" class="inl"/><text x="215" y="676" class="small">cctl_api_priv_inl.hpp</text>
  <rect x="210" y="687" width="100" height="24" class="box"/><text x="215" y="704" class="small">cctl_event.cpp</text>

  <!-- precompiled -->
  <rect x="60" y="330" width="260" height="20" class="box"/>
  <text x="65" y="345" class="small">precompiled.hpp</text>

  <!-- examples -->
  <rect x="380" y="90" width="290" height="140" class="box"/>
  <text x="390" y="110" class="label">examples/</text>
  <text x="390" y="130" class="small">echo/{client.cc, server.cc}</text>
  <text x="390" y="148" class="small">jsonrpc/</text>
  <text x="390" y="166" class="small">... build artifacts</text>

  <!-- doc -->
  <rect x="730" y="90" width="330" height="140" class="box"/>
  <text x="740" y="110" class="label">doc/</text>
  <text x="740" y="130" class="small">code-layout.svg</text>
  <text x="740" y="148" class="small">doxygen assets</text>
  <text x="740" y="166" class="small">notes.md</text>

  <!-- tests -->
  <rect x="730" y="310" width="330" height="140" class="box"/>
  <text x="740" y="330" class="label">src/test/</text>
  <text x="740" y="350" class="small">test_ak.cc, test_alloc_*.cc, test_file_io.cc, ...</text>

  <!-- build -->
  <rect x="380" y="310" width="290" height="140" class="box"/>
  <text x="390" y="330" class="label">build/</text>
  <text x="390" y="350" class="small">libak.a, precompiled.pch, objects, depfiles</text>

  <!-- Edges -->
  <line x1="180" y1="120" x2="180" y2="190" class="edge"/>
  <line x1="180" y1="120" x2="180" y2="260" class="edge"/>

  <line x1="180" y1="120" x2="120" y2="390" class="edge"/>
  <line x1="180" y1="120" x2="250" y2="390" class="edge"/>
  <line x1="180" y1="120" x2="120" y2="590" class="edge"/>
  <line x1="180" y1="120" x2="250" y2="590" class="edge"/>

  <line x1="180" y1="190" x2="120" y2="390" class="edge"/>
  <line x1="180" y1="190" x2="250" y2="390" class="edge"/>
  <line x1="180" y1="190" x2="120" y2="590" class="edge"/>
  <line x1="180" y1="190" x2="250" y2="590" class="edge"/>

  <!-- Legend -->
  <rect x="710" y="450" width="370" height="300" class="folder"/>
  <text x="720" y="470" class="label">Legend</text>
  <rect x="730" y="485" width="18" height="12" class="pub"/><text x="755" y="495" class="legend">Public API header (*_api.hpp)</text>
  <rect x="730" y="505" width="18" height="12" class="inl"/><text x="755" y="515" class="legend">Inline companions (*_api_inl.hpp)</text>
  <rect x="730" y="525" width="18" height="12" class="priv"/><text x="755" y="535" class="legend">Private headers (*_api_priv*.hpp)</text>
  <rect x="730" y="545" width="18" height="12" class="agg"/><text x="755" y="555" class="legend">Umbrella include (ak.hpp)</text>
  <rect x="730" y="565" width="18" height="12" class="box"/><text x="755" y="575" class="legend">Implementation units (.cpp) / misc</text>
  <rect x="730" y="585" width="18" height="12" class="folder"/><text x="755" y="595" class="legend">Folders / collections</text>
  <text x="730" y="620" class="legend">Arrows show dependency flow (includes/usage)</text>
  <text x="730" y="640" class="legend">ak.hpp -> ak/api.hpp -> module APIs</text>
  <text x="730" y="660" class="legend">Public API should not depend on priv headers</text>
</svg>